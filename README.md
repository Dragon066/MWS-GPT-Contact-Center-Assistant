# MWS-GPT-Contact-Center-Assistant

> Команда: **ШШШ**

> Трек: **Умный напарник: мультиагентная LLM-система для поддержки операторов контакт-центра**

## Описание

Автоматизированная мультиагентная система для помощи операторам контакт-центра.

Решение содержит:
- Фронтенд (Streamlit)
- Бэкенд (FastAPI, LangChain, Qdrant)
- Эмуляция CRM-системы (FastAPI, PostgreSQL).

Попробовать можно на нашем сервере, где решение уже развёрнуто: http://212.22.94.132/crm/ 

Демо-видео решения: https://disk.yandex.ru/i/YsbWI78RQfFiqA

"Документация": https://disk.yandex.ru/i/GlOwvT8aOh_T_Q

Для локальной установки следуйте инструкциям ниже.

## Установка

Решение развёртывается с помощью `docker compose`. Следуйте этим шагам:

- Склонируйте репозиторий (`git clone`)

- Перейдите в `/app`

- На основе файла `.env-EXAMPLE` создайте файл `.env` (можно просто убрать `-EXAMPLE`) и замените ключ `LLM_API_KEY` на актуальный (мы знаем, что невежественно пушить секреты, но он всё равно истечёт после хакатона)

- Запустите сборку контейнеров:

    ```bash
    docker compose up --build
    ```

- Точка входа: http://localhost/ или http://localhost/crm

## Конфигурационные параметры

Имеются ввиду малоочевидные параметры в `.env` файле:

- `LLM_..._AGENT` - модель под капотом агента
- `VERBOSE_MODELS_AGENTS` - вывод рассуждений агентов LangChain
- `VERBOSE_MODELS_CHAINS` - вывод цепочек LangChain

## Структура файлов

Ниже перечислены важные файлы и папки:

- `data.csv` - пример необходимой базы знаний (формат - .csv, первый столбец - индекс, второй столбец - данные для эмбеддинга, последующие - payload)
- `/app`
    - `/frontend` - фронтенд на Streamlit'е
    - `/crm` - CRM-система
    - `/backend` - бэкенд при помощи LangChain
        - `/agents` - пакет агентов
    - `.env` - файл окружения

## API

Пути до сервисов:

- CRM - `/crm`
- Фронтенд - `/chat`
- Бэкенд - `/llmapi`

Документацию по API можно получить автоматически от FastAPI по путям:

- `/crm/docs`
- `/llmapi/docs`

(но их невозможно потыкать в интерактивном режиме, потому что бэкендер облажался с настройкой относительных путей nginx)

В файле "документация" (https://disk.yandex.ru/i/GlOwvT8aOh_T_Q) можно увидеть подробное описание необходимых эндпоинтов.